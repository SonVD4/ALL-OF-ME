 DATA: LW_TAPOS TYPE LTAP-TAPOS.

  SORT GT_LTAP BY TANUM NLPLA.
  LOOP AT GT_LTAP ASSIGNING FIELD-SYMBOL(<FS_LTAP>).
    AT END OF NLPLA.
      LW_TAPOS = <FS_LTAP>-TAPOS.
    ENDAT.
    AT END OF TANUM.
      IF <FS_LTAP>-TAPOS = LW_TAPOS.
        <FS_LTAP>-NLTYP = <FS_LTAP>-NLTYP.
        <FS_LTAP>-NLPLA = <FS_LTAP>-NLPLA.
        APPEND <FS_LTAP> TO GT_LTAP1.
      ELSE.
        <FS_LTAP>-NLTYP = ''.
        <FS_LTAP>-NLPLA = ''.
      ENDIF.
      CLEAR LW_TAPOS.
    ENDAT.
  ENDLOOP.